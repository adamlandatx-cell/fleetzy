<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apply for weekly car rental with Fleetzy in Houston, Texas. Fast approval, flexible terms, rideshare-approved vehicles.">    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#059669">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Fleetzy">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- PWA Manifest & Icons -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="shortcut icon" href="/icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-120x120.png">
    
    <!-- Apple Splash Screens -->
    <link rel="apple-touch-startup-image" href="/splash/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash/iphoneplus_splash.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash/iphonexr_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash/iphonexsmax_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)">
    
    <!-- Social Media Preview -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://getfleetzy.netlify.app">
    <meta property="og:title" content="Apply Now - Fleetzy Car Rental">
    <meta property="og:description" content="Reliable weekly car rentals starting at $400/week. Fast approval, quality vehicles, flexible payments.">
    <meta property="og:image" content="https://getfleetzy.netlify.app/social/og_image.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://getfleetzy.netlify.app">
    <meta name="twitter:title" content="Fleetzy - Weekly Car Rentals">
    <meta name="twitter:description" content="Reliable weekly car rentals for gig economy drivers">
    <meta name="twitter:image" content="https://getfleetzy.netlify.app/social/twitter_large.png">
    
    <!-- PWA Helper Script -->
    <script src="/pwa-helper.js" defer></script>

    <title>Apply Now - Fleetzy Car Rental</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="fleetzy-icon.png">
    <link rel="apple-touch-icon" href="fleetzy-icon.png">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'fleetzy-green': '#059669',
                        'fleetzy-blue': '#475569',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Smooth transitions */
        * {
            transition: all 0.2s ease;
        }
        
        /* Hide non-active sections */
        .form-section {
            display: none;
        }
        
        .form-section.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Progress indicator */
        .progress-step {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .progress-step::before {
            content: '';
            position: absolute;
            top: 20px;
            left: -50%;
            width: 100%;
            height: 2px;
            background: #e2e8f0;
            z-index: -1;
        }
        
        .progress-step:first-child::before {
            display: none;
        }
        
        .progress-step.active::before,
        .progress-step.completed::before {
            background: #059669;
        }
        
        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e2e8f0;
            color: #64748b;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .progress-step.active .progress-circle {
            background: #059669;
            color: white;
        }
        
        .progress-step.completed .progress-circle {
            background: #059669;
            color: white;
        }
        
        /* Vehicle cards */
        .vehicle-card {
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .vehicle-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .vehicle-card.selected {
            border-color: #059669;
            background: #f0fdf4;
        }
        
        .vehicle-card.unavailable {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* Vehicle status badges */
        .vehicle-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: white;
        }
        
        .badge-available {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .badge-rented {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }
        
        .badge-maintenance {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .badge-reserved {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .vehicle-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        
        /* Camera preview */
        #cameraPreview {
            display: none;
        }
        
        #videoElement {
            width: 100%;
            max-width: 500px;
            border-radius: 12px;
        }
        
        #selfiePreviewContainer {
            display: none;
        }
        
        /* Loading state */
        .loading-vehicles {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .progress-step {
                display: none;
            }
            
            .mobile-progress {
                display: block !important;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-progress {
                display: none;
            }
        }
        
        /* Company rental section */
        #companySection {
            display: none;
        }
        
        /* Camera overlay for face guidance */
        #cameraContainer {
            position: relative;
        }
        
        #cameraOverlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            border: 4px solid #059669;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        }
        
        #cameraOverlay::after {
            content: 'ðŸ™‚';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            opacity: 0.3;
        }
        
        #cameraInstructions {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(5, 150, 105, 0.9);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            z-index: 11;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-5xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="index.html" class="flex items-center gap-2">
                    <i class="fas fa-arrow-left text-fleetzy-green"></i>
                    <img src="fleetzy-logo.png" alt="Fleetzy" class="h-8 w-auto">
                </a>
                <div class="text-sm text-gray-600">
                    <i class="fas fa-phone text-fleetzy-green mr-1"></i>
                    <span class="hidden sm:inline">Need help? </span>(281) 271-3900
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Indicator (Desktop) -->
    <div class="bg-white border-b border-gray-200 py-6 hidden md:block">
        <div class="max-w-5xl mx-auto px-4">
            <div class="flex justify-between items-start">
                <div class="progress-step active" data-step="1">
                    <div class="progress-circle">1</div>
                    <span class="text-xs text-center font-medium">Personal Info</span>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="progress-circle">2</div>
                    <span class="text-xs text-center font-medium">Select Vehicle</span>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="progress-circle">3</div>
                    <span class="text-xs text-center font-medium">Selfie</span>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="progress-circle">4</div>
                    <span class="text-xs text-center font-medium">Driver's License</span>
                </div>
                <div class="progress-step" data-step="5">
                    <div class="progress-circle">5</div>
                    <span class="text-xs text-center font-medium">Income & Review</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Bar (Mobile) -->
    <div class="mobile-progress bg-white border-b border-gray-200 py-4">
        <div class="max-w-5xl mx-auto px-4">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700">Step <span id="mobileStepNum">1</span> of 5</span>
                <span class="text-sm text-gray-500"><span id="mobileProgress">20</span>% Complete</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="mobileProgressBar" class="bg-fleetzy-green h-2 rounded-full" style="width: 20%"></div>
            </div>
        </div>
    </div>

    <!-- Main Form Container -->
    <div class="max-w-5xl mx-auto px-4 py-8">
        <form id="applicationForm">
            
            <!-- STEP 1: Personal Information -->
            <div class="form-section active" data-section="1">
                <div class="bg-white rounded-xl shadow-md p-6 md:p-8">
                    <div class="mb-6">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Personal Information</h2>
                        <p class="text-gray-600">Tell us about yourself to get started</p>
                    </div>

                    <!-- Rental Type Selection -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">Rental Type</label>
                        <div class="grid grid-cols-2 gap-4">
                            <label class="relative cursor-pointer">
                                <input type="radio" name="rentalType" id="rentalTypePersonal" value="personal" class="peer sr-only" checked onchange="toggleCompanySection()">
                                <div class="border-2 border-gray-300 rounded-lg p-4 peer-checked:border-fleetzy-green peer-checked:bg-green-50">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-user text-2xl text-fleetzy-green"></i>
                                        <div>
                                            <div class="font-bold text-gray-900">Personal</div>
                                            <div class="text-sm text-gray-600">$400/week</div>
                                        </div>
                                    </div>
                                </div>
                            </label>
                            <label class="relative cursor-pointer">
                                <input type="radio" name="rentalType" id="rentalTypeCompany" value="company" class="peer sr-only" onchange="toggleCompanySection()">
                                <div class="border-2 border-gray-300 rounded-lg p-4 peer-checked:border-fleetzy-green peer-checked:bg-green-50">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-building text-2xl text-fleetzy-green"></i>
                                        <div>
                                            <div class="font-bold text-gray-900">Company</div>
                                            <div class="text-sm text-gray-600">$350-375/week</div>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Company Information (Hidden by default) -->
                    <div id="companySection" class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                        <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                            <i class="fas fa-building text-fleetzy-blue"></i>
                            Company Information
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Company Name</label>
                                <input type="text" id="companyName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">HR Contact Name</label>
                                <input type="text" id="companyContactName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">HR Contact Email</label>
                                <input type="email" id="companyContactEmail" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">HR Contact Phone</label>
                                <input type="tel" id="companyContactPhone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mt-3">
                            <i class="fas fa-info-circle text-blue-500"></i>
                            Company rentals require dual signatures. HR rep signs first, driver signs after approval.
                        </p>
                    </div>

                    <!-- Personal Details -->
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">First Name *</label>
                            <input type="text" id="firstName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Last Name *</label>
                            <input type="text" id="lastName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                            <input type="email" id="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                            <input type="tel" id="phone" required placeholder="(281) 555-0123" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth *</label>
                        <input type="date" id="dateOfBirth" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        <p class="text-sm text-gray-500 mt-1">Must be 18 or older to rent</p>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Street Address *</label>
                        <input type="text" id="address" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                    </div>

                    <div class="grid md:grid-cols-3 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">City *</label>
                            <input type="text" id="city" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">State *</label>
                            <select id="state" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                                <option value="">Select State</option>
                                <option value="TX" selected>Texas</option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                                <option value="ID">Idaho</option>
                                <option value="IL">Illinois</option>
                                <option value="IN">Indiana</option>
                                <option value="IA">Iowa</option>
                                <option value="KS">Kansas</option>
                                <option value="KY">Kentucky</option>
                                <option value="LA">Louisiana</option>
                                <option value="ME">Maine</option>
                                <option value="MD">Maryland</option>
                                <option value="MA">Massachusetts</option>
                                <option value="MI">Michigan</option>
                                <option value="MN">Minnesota</option>
                                <option value="MS">Mississippi</option>
                                <option value="MO">Missouri</option>
                                <option value="MT">Montana</option>
                                <option value="NE">Nebraska</option>
                                <option value="NV">Nevada</option>
                                <option value="NH">New Hampshire</option>
                                <option value="NJ">New Jersey</option>
                                <option value="NM">New Mexico</option>
                                <option value="NY">New York</option>
                                <option value="NC">North Carolina</option>
                                <option value="ND">North Dakota</option>
                                <option value="OH">Ohio</option>
                                <option value="OK">Oklahoma</option>
                                <option value="OR">Oregon</option>
                                <option value="PA">Pennsylvania</option>
                                <option value="RI">Rhode Island</option>
                                <option value="SC">South Carolina</option>
                                <option value="SD">South Dakota</option>
                                <option value="TN">Tennessee</option>
                                <option value="UT">Utah</option>
                                <option value="VT">Vermont</option>
                                <option value="VA">Virginia</option>
                                <option value="WA">Washington</option>
                                <option value="WV">West Virginia</option>
                                <option value="WI">Wisconsin</option>
                                <option value="WY">Wyoming</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ZIP Code *</label>
                            <input type="text" id="zipCode" required maxlength="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                    </div>

                    <div class="flex justify-end">
                        <button type="button" onclick="nextStep()" class="bg-fleetzy-green text-white px-8 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                            Next Step
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- STEP 2: Vehicle Selection -->
            <div class="form-section" data-section="2">
                <div class="bg-white rounded-xl shadow-md p-6 md:p-8">
                    <div class="mb-6">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Choose Your Vehicle</h2>
                        <p class="text-gray-600">Select from our available rideshare-approved vehicles</p>
                    </div>

                    <!-- Vehicle Gallery -->
                    <div id="vehicleGallery" class="grid md:grid-cols-2 gap-6 mb-6">
                        <!-- Vehicles loaded dynamically by JavaScript -->
                        <div class="loading-vehicles">
                            <i class="fas fa-spinner fa-spin text-4xl text-fleetzy-green mb-3"></i>
                            <p class="text-lg font-medium">Loading vehicles...</p>
                        </div>
                    </div>

                    <!-- Hidden input to store selected vehicle -->
                    <input type="hidden" id="selectedVehicleId" name="selectedVehicleId">

                    <!-- Error message -->
                    <div id="vehicleError" style="display: none;" class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        Please select a vehicle to continue
                    </div>

                    <div class="flex justify-between">
                        <button type="button" onclick="previousStep()" class="bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Back
                        </button>
                        <button type="button" onclick="nextStep()" class="bg-fleetzy-green text-white px-8 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                            Next Step
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- STEP 3: Selfie Capture -->
            <div class="form-section" data-section="3">
                <div class="bg-white rounded-xl shadow-md p-6 md:p-8">
                    <div class="mb-6">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Take Your Selfie</h2>
                        <p class="text-gray-600">We need a clear photo of your face for identity verification</p>
                    </div>

                    <!-- Camera Controls -->
                    <div class="mb-6">
                        <div class="flex flex-col sm:flex-row gap-4 mb-6">
                            <button type="button" onclick="startCamera()" class="flex-1 bg-fleetzy-green text-white px-6 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                                <i class="fas fa-camera mr-2"></i>
                                Start Camera
                            </button>
                            <button type="button" onclick="uploadSelfie()" class="flex-1 bg-fleetzy-blue text-white px-6 py-3 rounded-lg font-semibold hover:bg-slate-700 transition">
                                <i class="fas fa-upload mr-2"></i>
                                Upload from Gallery
                            </button>
                        </div>

                        <!-- Camera Preview -->
                        <div id="cameraPreview" class="mb-6">
                            <div id="cameraContainer" class="relative bg-black rounded-lg overflow-hidden mb-4">
                                <div id="cameraInstructions">Position your face in the circle</div>
                                <div id="cameraOverlay"></div>
                                <video id="videoElement" autoplay playsinline class="w-full"></video>
                            </div>
                            <div class="flex gap-4">
                                <button type="button" onclick="captureSelfie()" class="flex-1 bg-fleetzy-green text-white px-6 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                                    <i class="fas fa-camera mr-2"></i>
                                    Capture Photo
                                </button>
                                <button type="button" onclick="stopCamera()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                                    <i class="fas fa-times mr-2"></i>
                                    Cancel
                                </button>
                            </div>
                        </div>

                        <!-- Selfie Preview -->
                        <div id="selfiePreviewContainer" class="mb-6">
                            <div class="bg-gray-100 rounded-lg p-4">
                                <p class="text-sm font-medium text-gray-700 mb-3">Preview:</p>
                                <img id="selfiePreview" alt="Selfie preview" class="max-w-sm mx-auto rounded-lg border-2 border-fleetzy-green">
                                <div class="flex gap-4 mt-4">
                                    <button type="button" onclick="startCamera()" class="flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 transition">
                                        <i class="fas fa-redo mr-2"></i>
                                        Retake
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Hidden inputs -->
                        <input type="hidden" id="selfieData" name="selfieData">
                        <input type="file" id="selfieFileInput" accept="image/*" style="display: none;">

                        <!-- Help text -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                                <i class="fas fa-info-circle text-blue-500"></i>
                                Selfie Tips
                            </h4>
                            <ul class="text-sm text-gray-700 space-y-1 ml-6 list-disc">
                                <li>Ensure good lighting on your face</li>
                                <li>Remove sunglasses and hat</li>
                                <li>Look directly at the camera</li>
                                <li>Make sure your entire face is visible</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flex justify-between">
                        <button type="button" onclick="previousStep()" class="bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Back
                        </button>
                        <button type="button" onclick="nextStep()" class="bg-fleetzy-green text-white px-8 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                            Next Step
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- STEP 4: Driver's License -->
            <div class="form-section" data-section="4">
                <div class="bg-white rounded-xl shadow-md p-6 md:p-8">
                    <div class="mb-6">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Driver's License</h2>
                        <p class="text-gray-600">Upload both sides of your valid driver's license</p>
                    </div>

                    <!-- License Front -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">License Front *</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-fleetzy-green transition cursor-pointer" onclick="triggerFileUpload('licenseFront')">
                            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                            <p class="text-gray-600 mb-2">Click to upload front of license</p>
                            <p class="text-sm text-gray-500">PNG, JPG up to 10MB</p>
                        </div>
                        <input type="file" id="licenseFront" accept="image/*" onchange="handleFileUpload(this, 'licenseFrontPreview')" style="display: none;" required>
                        <img id="licenseFrontPreview" class="mt-4 max-w-md mx-auto rounded-lg border-2 border-fleetzy-green" style="display: none;">
                    </div>

                    <!-- License Back -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">License Back *</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-fleetzy-green transition cursor-pointer" onclick="triggerFileUpload('licenseBack')">
                            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                            <p class="text-gray-600 mb-2">Click to upload back of license</p>
                            <p class="text-sm text-gray-500">PNG, JPG up to 10MB</p>
                        </div>
                        <input type="file" id="licenseBack" accept="image/*" onchange="handleFileUpload(this, 'licenseBackPreview')" style="display: none;" required>
                        <img id="licenseBackPreview" class="mt-4 max-w-md mx-auto rounded-lg border-2 border-fleetzy-green" style="display: none;">
                    </div>

                    <!-- License Details -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">License Number *</label>
                            <input type="text" id="licenseNumber" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Expiration Date *</label>
                            <input type="date" id="licenseExpiration" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                        </div>
                    </div>

                    <div class="flex justify-between">
                        <button type="button" onclick="previousStep()" class="bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Back
                        </button>
                        <button type="button" onclick="nextStep()" class="bg-fleetzy-green text-white px-8 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                            Next Step
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- STEP 5: Income Proof & Review -->
            <div class="form-section" data-section="5">
                <div class="bg-white rounded-xl shadow-md p-6 md:p-8">
                    <div class="mb-6">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">Income Verification</h2>
                        <p class="text-gray-600">Final step - upload proof of income and review your application</p>
                    </div>

                    <!-- Income Source -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Income Source *</label>
                        <select id="incomeSource" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fleetzy-green focus:border-transparent">
                            <option value="">Select Income Source</option>
                            <option value="uber">Uber Driver</option>
                            <option value="lyft">Lyft Driver</option>
                            <option value="doordash">DoorDash Driver</option>
                            <option value="w2">W-2 Employee</option>
                            <option value="self_employed">Self-Employed</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <!-- Income Proof Upload -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Proof of Income *</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-fleetzy-green transition cursor-pointer" onclick="triggerFileUpload('incomeProof')">
                            <i class="fas fa-file-invoice-dollar text-4xl text-gray-400 mb-3"></i>
                            <p class="text-gray-600 mb-2">Upload bank statement, pay stub, or earnings report</p>
                            <p class="text-sm text-gray-500">PDF, PNG, JPG up to 10MB</p>
                        </div>
                        <input type="file" id="incomeProof" accept="image/*,application/pdf" onchange="handleFileUpload(this, 'incomeProofPreview')" style="display: none;" required>
                        <img id="incomeProofPreview" class="mt-4 max-w-md mx-auto rounded-lg border-2 border-fleetzy-green" style="display: none;">
                    </div>

                    <!-- Terms & Conditions -->
                    <div class="mb-6">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" id="termsAccepted" required class="mt-1 w-5 h-5 text-fleetzy-green border-gray-300 rounded focus:ring-fleetzy-green">
                            <span class="text-sm text-gray-700">
                                I agree to the rental terms and conditions. I understand that a $500 security deposit is required and will be refunded at the end of the rental period (minus any damages). Weekly payments of $400 are due every 7 days. I authorize Fleetzy to run a background check.
                            </span>
                        </label>
                    </div>

                    <!-- Application Summary -->
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                        <h3 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
                            <i class="fas fa-check-circle text-fleetzy-green"></i>
                            Application Summary
                        </h3>
                        <div class="grid md:grid-cols-2 gap-3 text-sm">
                            <div>
                                <span class="text-gray-600">Weekly Rate:</span>
                                <span class="font-semibold ml-2" id="summaryRate">$400/week</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Security Deposit:</span>
                                <span class="font-semibold ml-2">$500</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Minimum Term:</span>
                                <span class="font-semibold ml-2">2 weeks</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Approval Time:</span>
                                <span class="font-semibold ml-2">24 hours</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between">
                        <button type="button" onclick="previousStep()" class="bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Back
                        </button>
                        <button type="submit" id="submitBtn" class="bg-fleetzy-green text-white px-8 py-3 rounded-lg font-semibold hover:bg-emerald-700 transition">
                            <i class="fas fa-check mr-2"></i>
                            Submit Application
                        </button>
                    </div>
                </div>
            </div>

        </form>
    </div>

    <!-- Footer -->
    <footer class="bg-fleetzy-blue text-white py-8 px-4 mt-12">
        <div class="max-w-5xl mx-auto text-center">
            <p class="mb-2">&copy; 2025 Fleetzy. All rights reserved.</p>
            <p class="text-sm text-gray-300">
                Questions? Call us at (281) 908-5583 or email <a href="/cdn-cgi/l/email-protection#cfa6a1a9a08fa8aabba9a3aaaabbb5b6e1aca0a2" class="text-green-400 hover:text-green-300"><span class="__cf_email__" data-cfemail="94fdfaf2fbd4f3f1e0f2f8f1f1e0eeedbaf7fbf9">[email&#160;protected]</span></a>
            </p>
        </div>
    </footer>

    <!-- Application JavaScript -->
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="application.js"></script>

    <!-- Company Section Toggle -->
    <script>
        function toggleCompanySection() {
            const companySection = document.getElementById('companySection');
            const companyRadio = document.getElementById('rentalTypeCompany');
            const summaryRate = document.getElementById('summaryRate');
            
            if (companyRadio.checked) {
                companySection.style.display = 'block';
                summaryRate.textContent = '$350-375/week';
            } else {
                companySection.style.display = 'none';
                summaryRate.textContent = '$400/week';
            }
        }

        // Update mobile progress bar
        function updateMobileProgress() {
            const stepNum = document.getElementById('mobileStepNum');
            const progress = document.getElementById('mobileProgress');
            const progressBar = document.getElementById('mobileProgressBar');
            
            if (stepNum && progress && progressBar) {
                stepNum.textContent = currentStep;
                const percentage = (currentStep / 5) * 100;
                progress.textContent = percentage;
                progressBar.style.width = percentage + '%';
            }
        }

        // Override nextStep and previousStep to update mobile progress
        const originalNextStep = window.nextStep;
        window.nextStep = function() {
            if (originalNextStep) {
                originalNextStep();
                updateMobileProgress();
            }
        };

        const originalPreviousStep
